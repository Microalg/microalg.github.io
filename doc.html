<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <title>Doc - MicroAlg</title>
        <meta name="description"
              content="Tutoriel en ligne pour MicroAlg." />
        <meta name="keywords" content="microalg, algo, algorithme, algorithmique, lisp, environnement" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script src="web/showdown.js"></script>
        <script src="web/showup.js"></script>
        <link type="text/css" href="web/showup.css" rel="stylesheet" />
        <script src="emulisp/emulisp_core.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="web/style.css" />
    </head>
    <body class="microalg">
        <div class="navbar">
            <a href="./">Accueil</a> :
            <a href="#top">Haut de page</a>
        </div>
        <noscript>
            <div style="color:#CC0000; text-align:center">
            Besoin de Javascript pour afficher certaines listes.
            </div>
        </noscript>
        <script>EMULISP_CORE.loadLisp("microalg.l");</script>
        <script type="text/markdown">
<!--
<a name="top"></a>

# MicroAlg - Documentation

Aller directement à :

* [Installation](#installation)
* [Pourquoi MicroAlg](#pourquoimicroalg)
* [Syntaxe](#syntaxe)
* [Liste des symboles prédéfinis](#listedessymbolesprdfinis)
* [Types](#types)
* [Feuille de route](#feuillederoute)
* [Architecture](#architecture)

## Avertissement

Que vous soyez débutant ou expert en informatique ou même en programmation,
cette page n’est pas idéale pour apprendre à utiliser MicroAlg. Voir plutôt le
[tutoriel officiel](tuto.html).

## Installation

Voir le fichier [INSTALL.md](https://github.com/Microalg/Microalg/blob/latest/INSTALL.md).

## Pourquoi MicroAlg ?

Suite à une formation suivie pour enseigner ISN, j’ai décidé vers le printemps
2012 de me lancer dans un outil pédagogique pour l’algorithmique. Après deux ans
de profonde réflexion puis de maturation en tiroir, le
[dépôt GitHub](https://github.com/Microalg/Microalg), sorte de quartier général
du projet, est créé fin mars 2014. Suivront :

* le [site officiel](http://microalg.info) et
  [son dépôt](https://github.com/Microalg/microalg.github.io),
* le [compte Twitter](https://twitter.com/microalg).

Au départ prévu pour être embarqué dans le langage Tcl, il a finalement été
embarqué dans PicoLisp.

## Caractéristiques principales

MicroAlg se veut :

* **Minimal** : peu d’instructions sont disponibles dans le cœur du langage.
  Si l’utilisateur a besoin d’autre chose, il doit l’implémenter
  lui-même. Il n’y a pas de bibliothèque standard, donc il faut s’en constituer
  une et apprécier celle offerte par les « vrais » langages.
* **Simple à installer** : car utilisable dans un navigateur.
* **Connecté à des outils** : de codage graphique, de visualisation…

## Syntaxe

### Instructions

Une *instruction* est constituée de parenthèses, contenant une *commande* et ses
*arguments* : `(Commande arg1 arg2 ...)`.

Les instructions peuvent être imbriquées. En effet, un des arguments d’une
commande peut être remplacé par une autre instruction :
`(Commande2 (Commande1 arg1 arg2 ...) arg3 ...)`.  
Dans ce cas, c’est la commande qui est à l’intérieur qui est exécutée en
premier.

### Conventions

Le nom d’une commande :

* ne contient pas d’accent
* commence par une majuscule
* le « tiret du 8 » ou « underscore » (`_`) en sépare les mots
* se termine par `?` si retourne un booléen

## Liste des symboles prédéfinis

Cette section est générée directement à partir du fichier `microalg.l`, que
vous pouvez trouver [ici](microalg.l).

Aller directement à :

<div id="cmds"></div>

## Types

En cours de rédaction.

On trouvera :

* [booléen](#boolen),
* [nombre](#nombre),
* [texte](#texte),
* [liste](#liste),
* [commande](#commande).

### Booléen

Deux valeurs : `Vrai` ou `Faux`.

### Nombre

Les nombres de MicroAlg sont ceux de Picolisp.

* Les entiers sont arbitrairement grands, positifs ou négatifs.
    * [Documentation Picolisp](http://software-lab.de/doc/ref.html#number)
      (en anglais)
* Les décimaux sont à [virgule fixe](http://fr.wikipedia.org/wiki/Virgule_fixe).
    * Le séparateur décimal est `.`.
    * L’échelle est `*Scl`. <!-- TODO: http://pastebin.com/A6tPQNqT -->
    * [Documentation Picolisp](http://software-lab.de/doc/ref.html#num-io)
      (en anglais)

### Texte

Délimités par des guillemets doubles : `"salut"`.

* [Documentation Picolisp](http://software-lab.de/doc/ref.html#transient)
  (en anglais)
* [Documentation Picolisp](http://software-lab.de/doc/ref.html#transient-io)
  (en anglais)

### Liste

En cours de rédaction.

### Commande

En cours de rédaction.

# Feuille de route

Voici les directions que le projet va prendre :

* Finir d’implémenter le jeu d’instructions de base
    * et les tests bien sûr
    * faire évoluer [le tutoriel](tuto.html) en parallèle
    * jusqu’à ce que MicroAlg soit [complet au sens de Turing](http://fr.wikipedia.org/wiki/Turing-complet)
* Implémenter une [machine de Turing](http://fr.wikipedia.org/wiki/Machine_de_Turing)
    * en détaillant le procédé
    * en détaillant le résultat (pédagogie, toujours la pédagogie…)
* Intégrer [Blockly](https://blockly-demo.appspot.com/static/apps/index.html)
  dans la version web
* Implémenter [une tortue](http://profgra.org/lycee/memento_des_tortues.html)
    * en restant dans l’esprit du jeu d’instructions minimal :
        * BC, LC
        * AV,
        * TG (laisser l’utilisateur implémenter TD)
    * dans au moins deux des trois versions de MicroAlg :
        * web d’abord
        * Java ensuite

À un niveau moins général, des rapports de bugs ou idées d’amélioration sont
régulièrement [reportées sur Github](https://github.com/Microalg/Microalg/issues?state=open).

# Architecture

Cette section explique les relations entre les différents composants de
MicroAlg et les composants sur lequels elle repose.

MicroAlg est un langage embarqué dans un langage de type
[Lisp](http://fr.wikipedia.org/wiki/Lisp), [PicoLisp](http://picolisp.com/).
Ce dernier est implémenté au moins avec trois langages, C+ASM, Java et
Javascript.

* En C+ASM, c’est la version dite *officielle*
  d’[Alexander Burger](http://software-lab.de/).
* En Java, c’est l’implémentation nommée Ersatz et réalisée par le créateur de
  PicoLisp lui-même.
* En Javascript, c’est l’implémentation nommée EmuLisp, réalisée par
  [Jon Kleiser](http://folk.uio.no/jkleiser/), dont je suis quasiment le seul
  utilisateur, et que je maintiens dans un
  [dépôt semi-officiel](https://github.com/grahack/emulisp).

Chaque implémentation posséde un programme principal, nommés respectivement
`pil`, `pilj` et `piljs`. Ces programmes ont deux missions :

* lancés sans argument, ils offrent un interpréteur interactif,
* lancés avec un nom de fichier en argument, ils interprètent ce fichier et
  passent en mode interactif, sauf si on les arrête avant.

Attention, `pilj` n’est pas le nom officiel de l’exécutable d’Ersatz (c’est
`pil`). De plus, les versions officielles et semi-officielles d’EmuLisp n’ont
pas de `piljs`. `piljs` n’existe (pour l’instant) que dans MicroAlg.

MicroAlg offre donc naturellement les programmes `malg`, `malgj` et `malgjs`.
Ils ont les mêmes missions que leurs homologues, la seule différence est qu’ils
chargent `microalg.l`, le cœur du projet MicroAlg, où les commandes du langage
sont définies.

![Diagramme d’architecture](visuels/archi.svg)

**Légende**

* MACHINE : l’ordinateur, le smartphone, la tablette, la machine virtuelle…
* JVM : pour [Java Virtual Machine](http://fr.wikipedia.org/wiki/Machine_virtuelle_Java),
  exécute du byte-code Java
* NodeJS : plateforme permettant d’interpréter du code Javascript
  (voir [l’article Wikipedia](http://fr.wikipedia.org/wiki/Nodejs))
* browser : le navigateur (Internet) installé sur la MACHINE
* PicoLisp : la version officielle du langage hôte, PicoLisp
* Ersatz : implémentation en Java de PicoLisp
* EmuLisp : implémentation en Javascript de PicoLisp
* `pil`, `pilj` et `piljs` : les interpréteurs des implémentations de PicoLisp
* `microalg.l` : le fichier définissant le langage MicroAlg
* `malg`, `malgj` et `malgjs` : les interpréteurs de MicroAlg,
  correspondants aux implémentations de PicoLisp
* web IDE : interface permettant de manipuler MicroAlg depuis un navigateur


<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
-->
        </script>
        <script>
        var scripts = document.getElementsByTagName('script');
        for (var i = 0; i < scripts.length; i++){
            var script = scripts[i];
            if (script.type != 'text/markdown') continue;
            var md = script.innerHTML.replace(/^\s<!--*/, '')
                .replace(/-->\s*$/, '');
            var markup = new Showdown.converter().makeHtml(md);
            document.write(markup);
        }
        </script>
        <script>
            var cmds_as_list = EMULISP_CORE.eval("symboles").toString();
            var cmds_as_strings = cmds_as_list
                .slice(1, -1)
                .split(' ')
                .map(function (x) {return x.slice(1, -1);});
            // TOC
            var toc = $('<div/>').addClass('cmds-list toc').appendTo($('#cmds'));
            $.each(cmds_as_strings, function(i, cmd) {
                var span = $('<span/>').appendTo(toc);
                var code = $('<code/>').appendTo(span);
                $("<a/>").attr("href", "#cmd-" + cmd)
                    .attr("title", "Voir la doc de la commande " + cmd)
                    .html(cmd)
                    .appendTo(code);
                span.html((i==0? "" : " ") + span.html());
            });
            // Defs
            var defs = $('<div/>').addClass('cmds-list defs').appendTo($('#cmds'));
            var dl = $('<dl/>').addClass('cmds-list').appendTo(defs);
            $.each(cmds_as_strings, function(i, cmd) {
                $('<a/>').attr("name", "cmd-" + cmd).appendTo(dl);
                $('<dt/>').html(cmd).appendTo(dl);
                var cmd_doc = EMULISP_CORE.eval("(get '" + cmd + " 'doc)");
                cmd_doc = cmd_doc.replace(/\^J/g,'\n');  // PicoLisp control char
                if (cmd_doc.charAt(0) == '"' && cmd_doc.charAt(cmd_doc.length-1) == '"') {
                    cmd_doc = cmd_doc.slice(1, -1);      // remove enclosing quotes
                }
                cmd_doc = new Showdown.converter().makeHtml(cmd_doc);
                $("<dd/>").html(cmd_doc).appendTo(dl);
                // corps fonction $("<dd/>").html(lisp_cmd.props.car.car.name).appendTo(dl);
            });
        </script>
        <script>
            $().showUp('.navbar', {
                upClass: 'navbar-show',
                downClass: 'navbar-hide'
            });
        </script>
    </body>
</html>
